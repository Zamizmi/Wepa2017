<p id="notice"><%= notice %></p>

<h1><%= @user.username.capitalize %></h1>
<p> Has made <% if @user.ratings.empty? %>
  0 ratings!
  <% else %><%=@user.ratings.count%> <%="rating".pluralize(@user.ratings.count)%>, with the average of <%=@user.AverageRating%>
  <% end %></p>

  <% if @user.memberships.count >0 %>
  <table>
    <thead>
      <tr>
        <th>Beer Club</th>
        <th>Member since</th>
        <th colspan="2"></th>
      </tr>
    </thead>

    <tbody>
      <% @user.memberships.each do |membership| %>
      <tr>
        <td><%= link_to membership.beer_club.name.capitalize, membership.beer_club%></td>
        <td><%= membership.created_at.year%> - <%= membership.created_at.month%> - <%= membership.created_at.day%></td>
        <% if membership.user == current_user %>
        <td><%= link_to 'Leave club', membership, method: :delete, data: { confirm:  'Are you sure?' } %></td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
  <% end %>
  <br>

  <% if @user.ratings.count >0 %>
  <table>
    <thead>
      <tr>
        <th>Beer</th>
        <th>Score</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @user.ratings.each do |rating| %>
      <tr>
        <td><%= rating.beer %></td>
        <td><%= rating.score%></td>
        <% if current_user == rating.user%>
        <td><%= link_to 'Delete', rating, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <td><%= link_to 'Edit', edit_user_path(@user) %></td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
  <% end %>
  <br>


  <div class="to_button">
    <%= link_to 'Back', users_path %>
  </div>
